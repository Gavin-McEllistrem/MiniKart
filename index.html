<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mini Kart 3D â€“ Group 9941</title>
  <link rel="stylesheet" href="style.css">
  <style>
    #win-modal {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, 0.65);
      z-index: 1000;
    }
    #win-card {
      background: #0f172a;
      color: #e2e8f0;
      padding: 24px 32px;
      border-radius: 12px;
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.35);
      text-align: center;
      min-width: 260px;
      border: 1px solid #1e293b;
    }
    #win-card h2 {
      margin: 0 0 8px;
      letter-spacing: 0.5px;
    }
    #win-card p {
      margin: 0 0 16px;
      color: #cbd5e1;
    }
    #win-card button {
      margin: 6px;
      padding: 10px 16px;
      border-radius: 8px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      color: #0f172a;
      background: #38bdf8;
      border: 1px solid #0ea5e9;
    }
    #win-card button.secondary {
      background: transparent;
      color: #e2e8f0;
      border-color: #334155;
    }
  </style>
</head>
<body>
  <div id="ui">
    <div id="group-id">Mini Kart 3D â€“ Group 9941</div>
    <button id="mode-btn">Mode: Prototype</button>
  </div>

  <div id="hud"></div>

  <!-- Map Editor UI -->
  <div id="editor-ui" class="hidden">
    <div id="editor-toolbar">
      <h3>Map Editor</h3>

      <!-- Tile Palette -->
      <div id="tile-palette">
        <h4>Tiles</h4>
        <div id="tile-grid">
          <!-- Tiles will be populated by JS -->
        </div>
      </div>

      <!-- Editor Controls -->
      <div id="editor-controls">
        <h4>Tools</h4>
        <button id="rotate-btn" class="editor-btn" title="Rotate tile (R)">
          ğŸ”„ Rotate
        </button>
        <button id="undo-btn" class="editor-btn" title="Undo (Ctrl+Z)">
          â†¶ Undo
        </button>
        <button id="redo-btn" class="editor-btn" title="Redo (Ctrl+Y)">
          â†· Redo
        </button>
        <button id="clear-btn" class="editor-btn warning" title="Clear entire track">
          ğŸ—‘ï¸ Clear
        </button>
      </div>

      <!-- Track Management -->
      <div id="track-controls">
        <h4>Track</h4>
        <input type="text" id="track-name" placeholder="Track Name" value="My Track" />
        <button id="test-btn" class="editor-btn primary">â–¶ï¸ Test Track</button>
        <button id="save-btn" class="editor-btn">ğŸ’¾ Save</button>
        <button id="load-btn" class="editor-btn">ğŸ“‚ Load</button>
        <button id="export-btn" class="editor-btn">ğŸ“¥ Export JSON</button>
      </div>

      <!-- Grid Info -->
      <div id="grid-info">
        <h4>Grid Info</h4>
        <div>Cursor: <span id="grid-coords">--</span></div>
        <div>Selected: <span id="selected-tile">None</span></div>
        <div>Rotation: <span id="rotation-display">0Â°</span></div>
      </div>

      <!-- Mode Toggle -->
      <div id="mode-toggle">
        <button id="exit-editor-btn" class="editor-btn warning">
          âŒ Exit Editor
        </button>
      </div>
    </div>
  </div>

  <!-- Main Menu -->
  <div id="main-menu">
    <h1>Mini Kart 3D</h1>
    <div id="menu-buttons">
      <button id="play-btn" class="menu-btn primary">â–¶ï¸ Play</button>
      <button id="editor-btn" class="menu-btn">ğŸ› ï¸ Map Editor</button>
    </div>
  </div>

  <div id="touch-controls">
    <div class="control-row">
      <button class="ctrl-btn" data-action="up">â†‘</button>
    </div>
    <div class="control-row">
      <button class="ctrl-btn" data-action="left">â†</button>
      <button class="ctrl-btn" data-action="down">â†“</button>
      <button class="ctrl-btn" data-action="right">â†’</button>
    </div>
    <div class="control-row">
      <button class="ctrl-btn" data-action="drift">Drift</button>
      <button class="ctrl-btn" data-action="reset">Reset</button>
    </div>
  </div>

  <div id="win-modal">
    <div id="win-card">
      <h2>Race Finished</h2>
      <p id="win-text">Winner: Player</p>
      <div>
        <button id="win-restart">Restart Race</button>
        <button id="win-menu" class="secondary">Main Menu</button>
      </div>
    </div>
  </div>
  <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
        "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
      }
    }
    </script>
  <!-- Main module script -->
  <script type="module" src="main.js"></script>
</body>
</html>
